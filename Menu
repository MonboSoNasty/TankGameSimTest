--// Advanced Tabbed GUI with Auto Skill Upgrade
-- By MonboSoNasty + ChatGPT
-- Fires instantly, draggable, tab system

--// Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UIS = game:GetService("UserInputService")
local SkillUpgrade = ReplicatedStorage:WaitForChild("Skills"):WaitForChild("Upgrade")

--// Skills to Upgrade
local skillList = {
	"Bullet Penetration",
	"Bullet Damage",
	"Bullet Speed",
	"Body Damage",
	"Health Regeneration",
	"Max Health",
	"Shield",
	"Reload"
}

--// Counters
local counters, running, fireAmounts = {}, {}, {}
for _, skill in ipairs(skillList) do
	counters[skill] = 0
	running[skill] = false
	fireAmounts[skill] = 1
end

--// ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MonboTabbedGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = game:GetService("CoreGui")

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 500, 0, 400)
MainFrame.Position = UDim2.new(0.5, -250, 0.4, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Parent = ScreenGui

-- Make draggable
local dragging, dragInput, dragStart, startPos
local function update(input)
	local delta = input.Position - dragStart
	MainFrame.Position = UDim2.new(
		startPos.X.Scale,
		startPos.X.Offset + delta.X,
		startPos.Y.Scale,
		startPos.Y.Offset + delta.Y
	)
end

MainFrame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

MainFrame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		dragInput = input
	end
end)

UIS.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 35)
Title.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18
Title.Text = "⚙️ MonboSoNasty GUI"
Title.Parent = MainFrame

-- Left Tab Panel
local TabPanel = Instance.new("Frame")
TabPanel.Size = UDim2.new(0, 120, 1, -35)
TabPanel.Position = UDim2.new(0, 0, 0, 35)
TabPanel.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
TabPanel.Parent = MainFrame

-- Right Content Frame
local ContentFrame = Instance.new("Frame")
ContentFrame.Size = UDim2.new(1, -120, 1, -35)
ContentFrame.Position = UDim2.new(0, 120, 0, 35)
ContentFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
ContentFrame.Parent = MainFrame

-- Function to create tabs
local function createTabButton(name, tabFrame)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1, -10, 0, 40)
	btn.Position = UDim2.new(0, 5, 0, (#TabPanel:GetChildren()-1)*45)
	btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.SourceSansBold
	btn.TextSize = 16
	btn.Text = name
	btn.Parent = TabPanel

	btn.MouseButton1Click:Connect(function()
		-- Hide all frames in ContentFrame
		for _, frame in ipairs(ContentFrame:GetChildren()) do
			if frame:IsA("Frame") then
				frame.Visible = false
			end
		end
		-- Show clicked tab
		tabFrame.Visible = true
	end)
end

--// Skill Tab Frame
local SkillTabFrame = Instance.new("Frame")
SkillTabFrame.Size = UDim2.new(1, 0, 1, 0)
SkillTabFrame.Position = UDim2.new(0, 0, 0, 0)
SkillTabFrame.BackgroundTransparency = 1
SkillTabFrame.Parent = ContentFrame
SkillTabFrame.Visible = true -- visible by default

createTabButton("Auto Skills", SkillTabFrame)

--// Add Skill UI inside SkillTabFrame
for i, skill in ipairs(skillList) do
	local yPos = (i-1)*45 + 10

	-- Skill Label
	local SkillLabel = Instance.new("TextLabel")
	SkillLabel.Size = UDim2.new(0, 130, 0, 40)
	SkillLabel.Position = UDim2.new(0, 10, 0, yPos)
	SkillLabel.BackgroundTransparency = 1
	SkillLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	SkillLabel.Font = Enum.Font.SourceSansBold
	SkillLabel.TextSize = 16
	SkillLabel.Text = skill
	SkillLabel.TextXAlignment = Enum.TextXAlignment.Left
	SkillLabel.Parent = SkillTabFrame

	-- Fire amount box
	local FireBox = Instance.new("TextBox")
	FireBox.Size = UDim2.new(0, 50, 0, 30)
	FireBox.Position = UDim2.new(0, 150, 0, yPos + 5)
	FireBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	FireBox.TextColor3 = Color3.fromRGB(255, 255, 255)
	FireBox.Font = Enum.Font.Code
	FireBox.TextSize = 16
	FireBox.Text = "1"
	FireBox.Parent = SkillTabFrame

	-- Counter Label
	local CounterLabel = Instance.new("TextLabel")
	CounterLabel.Size = UDim2.new(0, 60, 0, 30)
	CounterLabel.Position = UDim2.new(0, 210, 0, yPos + 5)
	CounterLabel.BackgroundTransparency = 1
	CounterLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
	CounterLabel.Font = Enum.Font.Code
	CounterLabel.TextSize = 14
	CounterLabel.Text = "0"
	CounterLabel.Parent = SkillTabFrame

	-- Toggle Button
	local Toggle = Instance.new("TextButton")
	Toggle.Size = UDim2.new(0, 60, 0, 30)
	Toggle.Position = UDim2.new(0, 280, 0, yPos + 5)
	Toggle.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
	Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
	Toggle.Font = Enum.Font.SourceSansBold
	Toggle.TextSize = 16
	Toggle.Text = "OFF"
	Toggle.Parent = SkillTabFrame

	-- FireBox input
	FireBox.FocusLost:Connect(function()
		local val = tonumber(FireBox.Text)
		if val and val > 0 then
			fireAmounts[skill] = val
		else
			FireBox.Text = tostring(fireAmounts[skill])
		end
	end)

	-- Toggle behavior
	Toggle.MouseButton1Click:Connect(function()
		running[skill] = not running[skill]
		Toggle.Text = running[skill] and "ON" or "OFF"
		Toggle.BackgroundColor3 = running[skill] and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(45, 45, 45)

		if running[skill] then
			task.spawn(function()
				for _ = 1, fireAmounts[skill] do
					if not running[skill] then break end
					SkillUpgrade:FireServer(skill)
					counters[skill] += 1
					CounterLabel.Text = tostring(counters[skill])
					task.wait()
				end
				running[skill] = false
				Toggle.Text = "OFF"
				Toggle.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
			end)
		end
	end)
end
