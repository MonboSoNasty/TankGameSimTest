--========================================--
-- Tank Game Hub (Orion + Advanced Skill GUI)
-- By MonboSoNasty + ChatGPT
-- Notes added for beginners
--========================================--

--// =====================
--// Load Orion UI Library
--// =====================
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

-- Optional notification
OrionLib:MakeNotification({
    Name = "Tank Game Hub",
    Content = "Advanced Auto Skill Upgrade Integrated",
    Image = "rbxassetid://4483345998",
    Time = 5
})

-- Create main window
local Window = OrionLib:MakeWindow({
    Name = "Tank Game Hub",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "TankGame"
})

--// =====================
--// Player Tab Example
--// =====================
local PlayerTab = Window:MakeTab({
    Name = "Player",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local PlayerSection = PlayerTab:AddSection({Name = "Player Controls"})

-- Walkspeed Slider
PlayerSection:AddSlider({
    Name = "Walkspeed",
    Min = 16,
    Max = 100,
    Default = 16,
    Color = Color3.fromRGB(255,255,255),
    Increment = 1,
    ValueName = "Walkspeed",
    Callback = function(Value)
        local plr = game.Players.LocalPlayer
        if plr and plr.Character and plr.Character:FindFirstChild("Humanoid") then
            plr.Character.Humanoid.WalkSpeed = Value
        end
    end    
})

--// =====================
--// Settings Tab Example
--// =====================
local SettingsTab = Window:MakeTab({
    Name = "Settings",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local SettingsSection = SettingsTab:AddSection({Name = "Settings"})

SettingsSection:AddButton({
    Name = "Destroy UI",
    Callback = function()
        OrionLib:Destroy()
    end
})

--// =====================
--// Skills Tab (Auto Upgrade)
--// =====================
local SkillsTab = Window:MakeTab({
    Name = "Skills",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local SkillsSection = SkillsTab:AddSection({Name = "Auto Upgrade Skills"})

-- Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local SkillUpgrade = ReplicatedStorage:WaitForChild("Skills"):WaitForChild("Upgrade")

-- Skills to upgrade
local skillList = {
    "Bullet Penetration",
    "Bullet Damage",
    "Bullet Speed",
    "Body Damage",
    "Health Regeneration",
    "Max Health",
    "Shield",
    "Reload"
}

-- Counters for each skill
local counters, running, fireAmounts = {}, {}, {}
for _, skill in ipairs(skillList) do
    counters[skill] = 0
    running[skill] = false
    fireAmounts[skill] = 1
end

-- For each skill, create a toggle + fire count input
for _, skill in ipairs(skillList) do
    -- Fire Amount Input (TextBox replacement)
    SkillsSection:AddTextbox({
        Name = skill.." Fire Amount",
        Default = "1",
        TextDisappear = false,
        Callback = function(value)
            local val = tonumber(value)
            if val and val > 0 then
                fireAmounts[skill] = val
            else
                fireAmounts[skill] = 1
            end
        end
    })

    -- Toggle for auto upgrade
    SkillsSection:AddToggle({
        Name = skill.." Auto Upgrade",
        Default = false,
        Callback = function(Value)
            running[skill] = Value
            if Value then
                task.spawn(function()
                    for _ = 1, fireAmounts[skill] do
                        if not running[skill] then break end
                        SkillUpgrade:FireServer(skill)
                        counters[skill] += 1
                        print(skill.." upgraded! Total: "..counters[skill])
                        task.wait() -- allows other processes to run
                    end
                    running[skill] = false
                    -- Automatically toggle off in Orion UI
                    SkillsSection:GetToggle(skill.." Auto Upgrade"):Set(false)
                end)
            end
        end
    })
end

--// Initialize Orion UI
OrionLib:Init()
